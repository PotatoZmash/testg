-- Make sure Rayfield Library is loaded first
loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
   Name = "Chat Sender",
   LoadingTitle = "Chat GUI",
   LoadingSubtitle = "by blazeghast",
   ConfigurationSaving = {
      Enabled = false
   },
   Discord = {
      Enabled = false
   },
   KeySystem = false
})

local ChatMessage = "hi" -- default message

Rayfield:CreateInput({
   Name = "Chat Message",
   PlaceholderText = "Type message to chat...",
   RemoveTextAfterFocusLost = false,
   Callback = function(Text)
       ChatMessage = Text
   end
})

Rayfield:CreateButton({
   Name = "Send Chat Message",
   Callback = function()
       local Players = game:GetService("Players")
       local ReplicatedStorage = game:GetService("ReplicatedStorage")
       local TextChatService = game:GetService("TextChatService")
       local Player = Players.LocalPlayer

       local ChatRemote = ReplicatedStorage:FindFirstChild("SayMessageRequest", true) or ReplicatedStorage:FindFirstChild("SayMessage", true)

       if ChatRemote then
           ChatRemote:FireServer(ChatMessage, "All")
       elseif TextChatService and TextChatService:FindFirstChild("TextChannels") then
           local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
           if channel then
               channel:SendAsync(ChatMessage)
           end
       else
           -- Fallback text above head
           local billboard = Instance.new("BillboardGui")
           billboard.Size = UDim2.new(0, 200, 0, 50)
           billboard.StudsOffset = Vector3.new(0, 3, 0)
           billboard.Adornee = Player.Character and Player.Character:FindFirstChild("Head")
           billboard.Parent = Player.Character

           local label = Instance.new("TextLabel")
           label.Size = UDim2.new(1, 0, 1, 0)
           label.BackgroundTransparency = 1
           label.Text = ChatMessage
           label.TextColor3 = Color3.new(1, 1, 1)
           label.TextScaled = true
           label.Parent = billboard

           task.delay(3, function()
               billboard:Destroy()
           end)
       end
   end
})
